variables:
- name: template
  ${{ if ne(variables['Build.Reason'], 'PullRequest') }}:
    value: main.yml
  ${{ if eq(variables['Build.Reason'], 'PullRequest') }}:
    value: dev.yml
- name: branch
  value: $(Build.SourceBranch)
- name: version
  value: $(Build.BuildNumber)
- name: npm_config_cache
  value: $(Pipeline.Workspace)/.npm

name: '$(BuildDefinitionName)_$(MajorVersion).$(MinorVersion).$(Revision).$(BuildID)'

extends:
  template: ${{ variables.template }}