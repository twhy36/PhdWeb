variables:
- name: template
  ${{ if or(eq(variables['Build.SourceBranch'], 'refs/heads/main'), eq(variables['Build.SourceBranch'], 'refs/heads/next'), eq(variables['Build.SourceBranch'], 'refs/heads/feature/edhnet6')) }}:
    value: main.yml
  ${{ if or(startsWith(variables['Build.SourceBranch'], 'refs/heads/release'), startsWith(variables['Build.SourceBranch'], 'refs/heads/hotfix')) }}:
    value: release.yml
  ${{ if or(eq(variables['Build.Reason'], 'PullRequest'), startsWith(variables['Build.SourceBranch'], 'refs/heads/bugfix'), startsWith(variables['Build.SourceBranch'], 'refs/heads/chore')) }}:
    value: dev.yml
- name: branch
  value: $(Build.SourceBranch)
- name: version
  value: $(Build.BuildNumber)
- name: npm_config_cache
  value: $(Pipeline.Workspace)/.npm

name: '$(BuildDefinitionName)_$(MajorVersion).$(MinorVersion).$(Revision).$(BuildID)'

extends:
  template: ${{ variables.template }}