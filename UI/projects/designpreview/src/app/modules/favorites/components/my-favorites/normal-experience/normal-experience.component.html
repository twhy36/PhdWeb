<div class="phd-error-msg-body" *ngIf="errorMessage.length > 0">
	<error-message [@flipOver]>
		<ng-template #body>{{ errorMessage }}</ng-template>
	</error-message>
</div>

<div class="phd-normal-experience" [class.phd-hide]="errorMessage.length > 0">
	<div class="d-flex flex-row phd-point-panel">
		<div *ngIf="!isPointPanelCollapsed" class="d-flex flex-column">
			<h3 class="phd-visually-hidden">
				Side Bar Header
			</h3>
			<div class="phd-selected-group">
				<ng-container *ngIf="!noVisibleGroups">
					<div class="phd-group-name">{{groupName}}: </div>
					<div class="phd-subgroup-name">{{subGroup?.label}}</div>
				</ng-container>
			</div>
			<h2 class="phd-decisions"><span>DECISIONS:</span></h2>
			<div class="phd-point-bar">
				<ng-container *ngIf="!noVisibleGroups">
					<decision-bar [points]="points" [currentPointId]="currentPointId" (selectDecisionPoint)="selectDecisionPointHandler($event)"></decision-bar>
				</ng-container>
			</div>
		</div>
		<button class="d-flex justify-content-center align-items-center phd-collapse-icon" [ngClass]="isPointPanelCollapsed ? 'phd-collapsed-icon-bg' : ''" (click)="togglePointPanel()">
			<i *ngIf="!isPointPanelCollapsed" class="fa fa-angle-double-left" aria-expanded="true" aria-label="Collapse Decision Bar"></i>
			<i *ngIf="isPointPanelCollapsed" class="fa fa-angle-double-right" aria-expanded="false" aria-label="Expand Decision Bar"></i>
		</button>
	</div>

	<div class="d-flex flex-column phd-card-panel" [ngClass]="isPointPanelCollapsed ? 'phd-card-panel-collapsed' : ''">
		<div class="phd-include-options"></div>
		<ng-container *ngIf="!noVisibleGroups">
			<div class="phd-point-container">
				<ng-container *ngFor="let point of points; trackBy:pointUpdated">
					<ng-container *ngIf="displayDecisionPoint(point)">
						<h2 class="phd-point-label" [attr.id]="'point-card-' + point.id">{{point?.label}}</h2>
						<h3 class="phd-point-title">{{getSubTitle(point)}}</h3>
						<ul class="d-flex flex-wrap phd-choice-cards">
							<ng-container *ngFor="let choice of point.choices; trackBy:choiceUpdated">
								<choice-card *ngIf="!choice.isHiddenFromBuyerView"
										[currentChoice]="getChoiceExt(choice, point)"
										[currentPoint]="point"
										[groups]="groups"
										[tree]="tree"
										[isReadonly]="isReadonly"
										[isPresale]="isPresale"
										[isPresalePricingEnabled]="isPresalePricingEnabled"
										(toggled)="choiceToggleHandler($event)"
										(viewChoiceDetail)="viewChoiceDetailHandler($event)">
								</choice-card>
							</ng-container>
							<choice-decline-card *ngIf="showDeclineCard(point)"
										[currentPoint]="point"
										[groups]="groups"
										[tree]="tree"
										[isReadonly]="isReadonly"
										[isPresale]="isPresale"
										[isPresalePricingEnabled]="isPresalePricingEnabled"
										[myFavoritesPointsDeclined]="myFavoritesPointsDeclined"
										(declineDecisionPoint)="declineDecisionPointHandler($event)">
							</choice-decline-card>
						</ul>
					</ng-container>
				</ng-container>
			</div>
		</ng-container>
	</div>

</div>

