<div class="phd-point phd-point-on-print">
	<div class="phd-point-details d-flex justify-content-start align-items-start">
		<div class="phd-point-indicator"></div>
		<div [ngClass]="{'phd-point-label': !isPresale, 'phd-point-label-presale': isPresale}">{{decisionPoint.label}}</div>

		<div class="phd-choice">
			<ng-container *ngFor="let choice of choicesCustom">
				<div class="phd-choice-detail" *ngIf="choice.quantity > 0">
					<div class="phd-choice-expand">
						<div (click)="toggleCollapsed(choice)" *ngIf="choice.hasMappedAttributes">
							<span *ngIf="!choice.showAttributes"><i class="fa fa-fw phd-clickable fa-chevron-circle-right"></i></span>
							<span *ngIf="choice.showAttributes"><i class="fa fa-fw phd-clickable fa-chevron-circle-down"></i></span>
						</div>
					</div>

					<div [ngClass]="{'phd-choice-header': !isPresale, 'phd-choice-header-presale': isPresale}">
						<span>{{ choice.label }}</span>
						<div class="phd-choice-body">
							<div class="my-3 phd-choice-attributes" *ngIf="choice.showAttributes">
								<ng-container *ngIf="choice.selectedAttributes.length || isDesignComplete; else attributeMsg">
									<div class="phd-choice-attributes-body" *ngFor="let attr of choice.mappedSelectedAttributes">
										<div class="phd-choice-attributes-labels">
											<div class="phd-location" *ngIf="attr.locationGroupId != null || attr.locationId != null">
												<span class="phd-label">{{ attr.locationGroupLabel }}:</span>
											</div>
											<div class="phd-location" *ngIf="attr.locationGroupId != null || attr.locationId != null">
												<span class="phd-label">Quantity:</span>
											</div>
											<ng-container *ngIf="attr.attributes.length > 0">
												<div class="phd-attribute" *ngFor="let subAttr of attr.attributes">
													<span class="phd-label">{{ getAttributeLabel(subAttr.attributeGroupLabel) }}</span>
												</div>
											</ng-container>
										</div>
										<div class="phd-choice-attributes-content">
											<div class="phd-location" *ngIf="attr.locationGroupId != null || attr.locationId != null">
												<span class="phd-content">{{ attr.locationName }}</span>
											</div>
											<div class="phd-location" *ngIf="attr.locationGroupId != null || attr.locationId != null">
												<span class="phd-content">{{ attr.locationQuantity }}</span>
											</div>
											<ng-container *ngIf="attr.attributes.length > 0">
												<div class="phd-attribute" *ngFor="let subAttr of attr.attributes">
													<span class="phd-content">{{ subAttr.attributeName }}</span>
												</div>
											</ng-container>
										</div>
									</div>
									<ng-container *ngIf="isChoiceComplete(choice); else attributeMsg"></ng-container>

								</ng-container>

								<ng-template #attributeMsg>
									Additional Selections Required
								</ng-template>
							</div>
						</div>
					</div>

					<div class="d-flex flex-row justify-content-end phd-choice-quantity" *ngIf="choice.quantity > 0">
						<span class="phd-quantity-label">Quantity:</span>
						<span class="phd-content">({{ choice.quantity }})</span>
					</div>
					<div *ngIf="!isPresale" class="phd-divider phd-hide-from-print"></div>
					<div class="actions" [ngClass]="{'phd-edit': !isPresale, 'phd-edit-presale': isPresale}">
						<ng-container *ngIf="!choice.priceHiddenFromBuyerView && !isPresale">
							<span *ngIf="selections?.length > 0">{{choice.price * choice.quantity | currency:'USD':'symbol':'0.0-0'}}</span>
						</ng-container>
						<ng-container *ngIf="choice.priceHiddenFromBuyerView && !isPresale">
							<span>Pricing Varies
								<info-tooltip-component [template]="infoContent"></info-tooltip-component>
							</span>
						</ng-container>
						<div *ngIf="!contractedOptionsPage" class="actions actionLinks phd-hide-from-print">
							<a (click)="onViewOrEdit()" class="phd-choice-action-label">{{actionLabel}}</a>
							<i *ngIf="!isReadonly" class="fa fa-times phd-clickable" (click)="onRemove(choice)"></i>
						</div>
					</div>
				</div>
			</ng-container>
		</div>
	</div>
</div>

<ng-template #infoContent>
	<div>
		<p><strong>Pricing Varies:</strong> Pricing will be determined during your meeting with your Design Consultant.</p>
	</div>
	<button class="btn btn-outline-primary">x</button>
</ng-template>
