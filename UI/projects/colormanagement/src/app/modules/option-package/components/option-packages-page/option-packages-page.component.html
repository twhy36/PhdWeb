<option-packages-header
	(addOptionPackage)="nameDialog.add(currentFinancialCommunityId)"
></option-packages-header>

<name-dialog #nameDialog (change)="optionPackagesChange($event)"></name-dialog>

<div class="container">
	<div style="height: auto;" class="mx-2 phd-table-container" infiniteScroll
		[infiniteScrollThrottle]="settings.infiniteScrollThrottle" [infiniteScrollDisabled]="allDataLoaded"
		(scrolled)="onPanelScroll()" [scrollWindow]="false">
		<phd-table #pkgCommon tableId="communityOptionPackages" [value]="commonPackages$ | async"
			showColumnHeaders="false">
			<phd-column field="name"></phd-column>
			<phd-column width="48px" columnClass="phd-icon">
				<ng-template #body let-currentRecord>
					<i role="button" class="fa fa-pencil" title="Edit Package" *ngIf="currentRecord.isCommon != null"
						(click)="editPackage(currentRecord)">
					</i>
				</ng-template>
			</phd-column>
		</phd-table>
	</div>

	<div style="height: auto;" class="mx-2 phd-table-container" infiniteScroll
		[infiniteScrollThrottle]="settings.infiniteScrollThrottle" [infiniteScrollDisabled]="allDataLoaded"
		(scrolled)="onPanelScroll()" [scrollWindow]="false">
		<phd-table #pkgCommunity [value]="communityPackages$ | async" sortField="presentationOrder"
			canReorderRows="draggableRows" (onRowReorder)="onRowReorder($event)" showColumnHeaders="false">
			<phd-column isDragHandler="true" width="48px" field="dragPlaceholder"></phd-column>
			<phd-column field="name"></phd-column>
			<phd-column width="48px" columnClass="phd-icon">
				<ng-template #body let-currentRecord>
					<i role="button" class="fa fa-pencil" title="Edit Package" (click)="editPackage(currentRecord)"></i>
				</ng-template>
			</phd-column>
			<phd-column width="48px" columnClass="phd-icon">
				<ng-template #body let-currentRecord>
					<i role="button" class="fa fa-edit" title="Rename Package" (click)="nameDialog.edit(currentRecord)">
					</i>
				</ng-template>
			</phd-column>
		</phd-table>
	</div>
</div>
