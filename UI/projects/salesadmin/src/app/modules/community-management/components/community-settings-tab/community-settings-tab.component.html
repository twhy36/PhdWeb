<div class ="phd-page-container">
	<div class="pdh-page-body">
		<div class="container-fluid mx-auto phd-settings-container" *ngIf="financialCommunity; else noCommunityMessage">
			<form [formGroup]="communitySettingsForm" >
				<div class="phd-box-background phd-center">
					<div class="phd-box">
						<div class="phd-line">
							<div class="font-weight-bold">THO ECOE date for Dirt Sale:</div>
						</div>
						<div class="phd-line">
							<label class="font-weight-bold">Purchase Date +</label>
							<input class="phd-ecoe-input" id="ecoe-months" type="number" formControlName="ecoeMonths" min="1" max="15"/>
							<label class="font-weight-bold">Months</label>
							<span class="text-danger"
								*ngIf="communitySettingsForm.controls.ecoeMonths.invalid && communitySettingsForm.controls.ecoeMonths.dirty && communitySettingsForm.controls.ecoeMonths.errors.min">
								Invalid: ECOE Date must be at least 1 Month.
							</span>
							<span class="text-danger"
								*ngIf="communitySettingsForm.controls.ecoeMonths.invalid && communitySettingsForm.controls.ecoeMonths.dirty && communitySettingsForm.controls.ecoeMonths.errors.max">
								Invalid: ECOE Date must be 15 Months or less.
							</span>
						</div>
					</div>
				</div>
				<div class="phd-box-background phd-center">
					<div class="phd-box">
						<div class="phd-line">
							<div class="font-weight-bold">Set THO Earnest Money amount here:</div>
						</div>
						<div class="phd-input-line">
							<div class="form-group">
								<label class="font-weight-bold">$</label>
								<input class="phd-earnest-money-input" id="earnest-money" formControlName="earnestMoney" maxlength="5"/>
								<span class="text-danger"
									*ngIf="communitySettingsForm.controls.earnestMoney.invalid && communitySettingsForm.controls.earnestMoney.dirty && communitySettingsForm.controls.earnestMoney.errors.min">
									Invalid: Earnest Money must be at least $0
								</span>
								<span class="text-danger"
									*ngIf="communitySettingsForm.controls.earnestMoney.invalid && communitySettingsForm.controls.earnestMoney.dirty && communitySettingsForm.controls.earnestMoney.errors.max">
									Invalid: Earnest Money must be less than $100,000
								</span>
							</div>
						</div>
					</div>
				</div>
			</form>
			<div class="phd-box-background" *ngIf="!!url">
				<div class="phd-box">
					<div class="phd-line">
						<div class="font-weight-bold">Enable THO Community Link for Sales Consultants Only</div>
						<div class="col-md">
							<button class="btn btn-sm btn-toggle btn-auto-approval" [ngClass]="{'active': !isCommunityLinkEnabled, 'btn-success': isCommunityLinkEnabled, 'btn-secondary': !isCommunityLinkEnabled}"
									(click)="toggleCommunityLinkEnabled()">
								<div class="handle"></div>
							</button>
						</div>
						<div class="phd-line">
							<a class="btn-link" [href]="url" target="_blank" rel="noopener noreferrer">{{ url }}</a>
						</div>
					</div>
				</div>
			</div>
			<div class="phd-box-background">
				<div class="phd-box">
					<div class="phd-line">
						<div class="font-weight-bold">Enable Design Preview for Community</div>
						<div class="col-md">
							<button class="btn btn-sm btn-toggle btn-auto-approval" [ngClass]="{'active': !isPreviewEnabled, 'btn-success': isPreviewEnabled, 'btn-secondary': !isPreviewEnabled}"
									(click)="togglePreviewEnabled()">
								<div class="handle"></div>
								{{ log(isPreviewEnabled) }}
							</button>
						</div>
					</div>
				</div>
			</div>
			<div class="phd-save-button phd-center" *ngIf="canEdit">
				<button class="btn btn-primary phd-btn-save" (click)="save();" [disabled]="saveDisabled">
					Save
					<ng-container *ngIf="isSaving"><i class="fa fa-spinner fa-spin fa-fw"></i></ng-container>
				</button>
			</div>
		</div>
	</div>
	<ng-template #noCommunityMessage>
		<p class="phd-no-community">Please select a community.</p>
	</ng-template>
</div>

