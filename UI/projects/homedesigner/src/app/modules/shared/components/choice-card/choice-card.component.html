<div class="phd-choice-card" [class.active]="choice?.quantity" [class.selected]="choice?.quantity" [@flipOver] (click)="viewChoiceDetail()">
	<div class="phd-header">
		<div class="phd-choice-image">
			<cl-image *ngIf="imageUrl" public-id="{{imageUrl}}" type="fetch" background="#ffffff" crop="lpad" height="190" width="270"
					  (onError)="onLoadImageError($event)">
			</cl-image>
			<img class="phd-logo-image" src="assets/pultegroup_logo.jpg" *ngIf="!imageUrl">
		</div>
	</div>

	<div class="phd-body">
		<div class="phd-choice-details">
			<h1 class="phd-2-line-limit">
				{{choice?.label}}
			</h1>
			<div class="d-flex flex-row justify-content-between">
				<div>
					<strong>{{choice.price * (choice.quantity > 0 ? choice.quantity : 1) | currency:'USD':'symbol':'0.0-0'}}</strong>
				</div>
				<ng-container *ngIf="choice.choiceStatus === 'Contracted'">
					<i class="fa fa-check phd-icon-selected"></i>
				</ng-container>
				<ng-container *ngIf="choice.choiceStatus === 'Available' && choice.enabled">
					<div class="phd-clickable" (click)="$event.stopPropagation()">
						<span class="phd-icon-selected"><i *ngIf="choice.isFavorite" class="fa fa-heart" (click)="toggleChoice()"></i></span>
						<i *ngIf="!choice.isFavorite" class="fa fa-heart-o" (click)="toggleChoice()"></i>
					</div>
				</ng-container>
				<ng-container *ngIf="choice.choiceStatus === 'Available' && !choice.enabled">
					<div class="phd-clickable" (click)="$event.stopPropagation()">
						<i class="fa fa-ban" (click)="openBlockedChoiceModal()"></i>
					</div>
				</ng-container>
			</div>
		</div>
	</div>
</div>

<ng-template #blockedChoiceModal let-c="close" let-d="dismiss">
	<div>
		<div class="d-flex justify-content-end">
			<i class="fa fa-times-circle phd-close" (click)="closeClicked()"></i>
		</div>
		<div class="phd-blocked-title">
			Before this can be selected:
		</div>
		<ul class="phd-blocked-list">
			<li *ngFor="let disabledByItem of disabledByList">
				<div *ngIf="!disabledByItem.choiceId">Make a <span class="phd-clickable phd-blocked-link" (click)="onBlockedItemClick(disabledByItem.pointId)">{{disabledByItem.label}}</span> selection</div>
				<div *ngIf="disabledByItem.choiceId">Select <span class="phd-clickable phd-blocked-link" (click)="onBlockedItemClick(disabledByItem.pointId)">{{disabledByItem.label}}</span></div>
			</li>
		</ul>
	</div>
</ng-template>
